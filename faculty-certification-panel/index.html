<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Faculty Certification Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'brand-indigo': {
                '50': '#f0f0ff',
                '100': '#e0e0ff',
                '200': '#c7c7ff',
                '300': '#a3a3ff',
                '400': '#7f7fff',
                '500': '#6666ff',
                '600': '#5252cc',
                '700': '#4343a3',
                '800': '#373780',
                '900': '#2e2e66',
              },
            },
          },
        },
      }
    </script>
    <style>
        .hidden { display: none; }
    </style>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-slate-50 min-h-screen font-sans">
    <noscript>You need to enable JavaScript to run this app.</noscript>

    <div id="app-container" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <header class="mb-8">
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-8 h-8 text-indigo-600">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" />
                    </svg>
                </div>
                <div>
                    <h1 class="text-3xl font-bold text-gray-900">Faculty Panel</h1>
                    <p class="text-gray-500">Verify and recommend certifications</p>
                </div>
            </div>
        </header>

        <nav class="mb-6">
            <div class="bg-white p-2 rounded-xl shadow-sm border border-gray-100 inline-flex items-center gap-2">
                <button id="verification-tab-btn" class="flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors bg-indigo-100 text-indigo-700">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.75-13a.75.75 0 00-1.5 0v5c0 .414.336.75.75.75h4a.75.75 0 000-1.5h-3.25V5z" clip-rule="evenodd" />
                    </svg>
                    Verification Requests
                    <span id="verification-count" class="text-xs font-bold w-6 h-5 flex items-center justify-center rounded-full bg-indigo-600 text-white"></span>
                </button>
                <button id="recommend-tab-btn" class="flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors text-gray-600 hover:bg-gray-100">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" />
                    </svg>
                    Recommend
                    <span id="recommend-count" class="text-xs font-bold w-6 h-5 flex items-center justify-center rounded-full bg-gray-200 text-gray-700"></span>
                </button>
            </div>
        </nav>

        <main>
            <!-- Verification Page -->
            <div id="verification-page">
                 <div class="space-y-8">
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4">
                        <div class="relative flex-grow">
                             <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                            </svg>
                            <input id="verification-search" type="text" placeholder="Search by student, certificate, or provider..." class="w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400 outline-none">
                        </div>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-700 mb-4 flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-6 h-6 text-gray-500">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.75-13a.75.75 0 00-1.5 0v5c0 .414.336.75.75.75h4a.75.75 0 000-1.5h-3.25V5z" clip-rule="evenodd" />
                            </svg>
                            Pending Verification
                            <span id="pending-count-badge" class="text-sm font-semibold bg-gray-200 text-gray-700 w-6 h-6 flex items-center justify-center rounded-full"></span>
                        </h2>
                        <div id="pending-requests-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                        <p id="no-pending-requests" class="text-gray-500 hidden">No pending requests found.</p>
                    </div>

                    <div id="recently-verified-section" class="hidden">
                         <h2 class="text-xl font-bold text-gray-700 mb-4 flex items-center gap-2">
                             <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-6 h-6 text-green-500">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" />
                            </svg>
                            Recently Verified
                            <span id="verified-count-badge" class="text-sm font-semibold bg-gray-200 text-gray-700 w-6 h-6 flex items-center justify-center rounded-full"></span>
                        </h2>
                        <div id="verified-requests-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                    </div>
                </div>
            </div>

            <!-- Recommend Page -->
            <div id="recommend-page" class="hidden">
                <div class="space-y-6">
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4">
                        <div class="relative flex-grow">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                            </svg>
                            <input id="recommend-search" type="text" placeholder="Search certifications..." class="w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400 outline-none">
                        </div>
                        <div class="relative">
                             <select id="domain-filter" class="appearance-none bg-white w-48 border border-gray-200 text-gray-700 py-2 px-4 pr-8 rounded-lg leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400">
                                <!-- Options will be populated by JS -->
                            </select>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 w-5 h-5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                            </svg>
                        </div>
                        <div class="relative">
                            <select id="level-filter" class="appearance-none bg-white w-48 border border-gray-200 text-gray-700 py-2 px-4 pr-8 rounded-lg leading-tight focus:outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-400">
                                <!-- Options will be populated by JS -->
                            </select>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700 w-5 h-5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                            </svg>
                        </div>
                    </div>
                    <div id="certifications-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
                    <p id="no-certs-found" class="text-gray-500 hidden">No certifications match the current filters.</p>
                </div>
            </div>
        </main>
    </div>

<script type="module">
    // --- DATA AND TYPES ---
    const Domain = {
        DataScience: "Data Science",
        CloudComputing: "Cloud Computing",
        DevOps: "DevOps",
        MachineLearning: "Machine Learning",
        Cybersecurity: "Cybersecurity",
        WebDevelopment: "Web Development",
    };

    const Level = {
        Beginner: "Beginner",
        Intermediate: "Intermediate",
        Advanced: "Advanced",
    };

    const AVAILABLE_CERTIFICATIONS = [
        { id: '1', title: 'IBM Data Science Professional', provider: 'IBM', rating: 4.6, studentCount: 70000, durationWeeks: 12, domain: Domain.DataScience, level: Level.Intermediate, isTrending: true, isFacultyVerified: true },
        { id: '2', title: 'Microsoft Azure Fundamentals', provider: 'Microsoft', rating: 4.7, studentCount: 85000, durationWeeks: 4, domain: Domain.CloudComputing, level: Level.Beginner, isTrending: false, isFacultyVerified: true },
        { id: '3', title: 'Certified Kubernetes Administrator', provider: 'CNCF', rating: 4.8, studentCount: 45000, durationWeeks: 8, domain: Domain.DevOps, level: Level.Advanced, isTrending: false, isFacultyVerified: true },
        { id: '4', title: 'TensorFlow Developer Certificate', provider: 'Google', rating: 4.9, studentCount: 60000, durationWeeks: 10, domain: Domain.MachineLearning, level: Level.Advanced, isTrending: true, isFacultyVerified: true },
        { id: '5', title: 'Certified Ethical Hacker', provider: 'EC-Council', rating: 4.6, studentCount: 55000, durationWeeks: 12, domain: Domain.Cybersecurity, level: Level.Advanced, isTrending: false, isFacultyVerified: true },
        { id: '6', title: 'Full Stack Web Development', provider: 'Coursera', rating: 4.5, studentCount: 90000, durationWeeks: 16, domain: Domain.WebDevelopment, level: Level.Intermediate, isTrending: false, isFacultyVerified: true },
        { id: '7', title: 'AWS Cloud Practitioner', provider: 'Amazon Web Services', rating: 4.8, studentCount: 120000, durationWeeks: 6, domain: Domain.CloudComputing, level: Level.Beginner, isTrending: true, isFacultyVerified: true },
        { id: '8', title: 'Google Data Analytics Professional', provider: 'Google', rating: 4.9, studentCount: 95000, durationWeeks: 8, domain: Domain.DataScience, level: Level.Beginner, isTrending: true, isFacultyVerified: true },
        { id: '9', title: 'Meta Front-End Developer', provider: 'Meta', rating: 4.7, studentCount: 80000, durationWeeks: 10, domain: Domain.WebDevelopment, level: Level.Intermediate, isTrending: true, isFacultyVerified: true },
    ];

    const INITIAL_VERIFICATION_REQUESTS = [
        { id: 'req1', studentName: 'Sarah Johnson', studentEmail: 'sarah.j@university.edu', certificationTitle: 'AWS Cloud Practitioner', certificationProvider: 'Amazon Web Services', domain: Domain.CloudComputing, submittedDate: '10/1/2025' },
        { id: 'req2', studentName: 'Michael Chen', studentEmail: 'michael.c@university.edu', certificationTitle: 'Google Data Analytics Professional', certificationProvider: 'Google', domain: Domain.DataScience, submittedDate: '10/2/2025' },
        { id: 'req3', studentName: 'Emily Rodriguez', studentEmail: 'emily.r@university.edu', certificationTitle: 'Meta Front-End Developer', certificationProvider: 'Meta', domain: Domain.WebDevelopment, submittedDate: '10/3/2025' },
        { id: 'req4', studentName: 'David Kim', studentEmail: 'david.k@university.edu', certificationTitle: 'IBM Data Science Professional', certificationProvider: 'IBM', domain: Domain.DataScience, submittedDate: '10/3/2025' },
        { id: 'req5', studentName: 'Jessica Martinez', studentEmail: 'jessica.m@university.edu', certificationTitle: 'Microsoft Azure Fundamentals', certificationProvider: 'Microsoft', domain: Domain.CloudComputing, submittedDate: '10/4/2025' },
        { id: 'req6', studentName: 'Alex Thompson', studentEmail: 'alex.t@university.edu', certificationTitle: 'Certified Kubernetes Administrator', certificationProvider: 'CNCF', domain: Domain.DevOps, submittedDate: '10/4/2025' },
        { id: 'req7', studentName: 'Priya Patel', studentEmail: 'priya.p@university.edu', certificationTitle: 'TensorFlow Developer Certificate', certificationProvider: 'Google', domain: Domain.MachineLearning, submittedDate: '10/5/2025' },
        { id: 'req8', studentName: 'James Wilson', studentEmail: 'james.w@university.edu', certificationTitle: 'Certified Ethical Hacker', certificationProvider: 'EC-Council', domain: Domain.Cybersecurity, submittedDate: '10/5/2025' },
    ];

    // --- STATE MANAGEMENT ---
    let state = {
        activeView: 'verification', // 'verification' or 'recommend'
        pendingRequests: [...INITIAL_VERIFICATION_REQUESTS],
        verifiedRequests: [],
        recommendedCertIds: new Set(),
        verificationSearch: '',
        recommendSearch: '',
        domainFilter: 'All',
        levelFilter: 'All',
    };

    // --- DOM ELEMENTS ---
    const verificationPage = document.getElementById('verification-page');
    const recommendPage = document.getElementById('recommend-page');
    const verificationTabBtn = document.getElementById('verification-tab-btn');
    const recommendTabBtn = document.getElementById('recommend-tab-btn');
    
    // --- CARD TEMPLATES (HTML GENERATORS) ---
    const createCertificationCardHTML = (cert, isRecommended) => {
        return `
            <div class="bg-white rounded-xl shadow-md p-5 border border-gray-100 flex flex-col space-y-4 transition-transform hover:scale-105 duration-300">
                <div class="flex justify-between items-start">
                    <div class="flex flex-wrap gap-2">
                        ${cert.isFacultyVerified ? `<span class="flex items-center text-xs font-semibold bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 mr-1"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" /></svg> Faculty Verified</span>` : ''}
                        ${cert.isTrending ? `<span class="flex items-center text-xs font-semibold bg-pink-100 text-pink-700 px-2 py-1 rounded-full"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 mr-1"><path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z" /><path fill-rule="evenodd" d="M1.5 10a8.5 8.5 0 1117 0 8.5 8.5 0 01-17 0zM10 17a7 7 0 100-14 7 7 0 000 14z" clip-rule="evenodd" /></svg> Trending</span>` : ''}
                    </div>
                    <input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500" />
                </div>
                <div>
                    <h3 class="font-bold text-gray-800 text-lg">${cert.title}</h3>
                    <p class="text-gray-500 text-sm">${cert.provider}</p>
                </div>
                <div class="flex items-center justify-between text-sm text-gray-600">
                    <div class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-yellow-400 mr-1"><path fill-rule="evenodd" d="M10.868 2.884c.321-.662 1.215-.662 1.536 0l1.681 3.462 3.812.553c.73.106 1.023.998.494 1.512l-2.76 2.69.652 3.796c.126.73-.635 1.285-1.28.944L10 15.34l-3.395 1.785c-.645.34-1.406-.214-1.28-.944l.652-3.796-2.76-2.69c-.528-.514-.236-1.406.494-1.512l3.812-.553 1.681-3.462z" clip-rule="evenodd" /></svg><span class="text-gray-700 font-semibold">${cert.rating.toFixed(1)}</span></div>
                    <span>${(cert.studentCount / 1000).toFixed(0)}K students</span>
                    <span class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4 mr-1"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.75-13a.75.75 0 00-1.5 0v5c0 .414.336.75.75.75h4a.75.75 0 000-1.5h-3.25V5z" clip-rule="evenodd" /></svg> ${cert.durationWeeks} weeks</span>
                </div>
                <div class="flex-grow"></div>
                <div class="border-t border-gray-100 pt-4 flex items-center justify-between">
                    <div class="flex items-center gap-2">
                        <span class="text-xs font-medium bg-gray-100 text-gray-700 px-3 py-1 rounded-full">${cert.domain}</span>
                        <span class="text-xs font-medium bg-gray-100 text-gray-700 px-3 py-1 rounded-full">${cert.level}</span>
                    </div>
                    <button data-id="${cert.id}" ${isRecommended ? 'disabled' : ''} class="recommend-btn font-semibold py-2 px-4 rounded-lg flex items-center gap-2 transition-colors ${isRecommended ? 'bg-green-600 text-white cursor-not-allowed' : 'bg-indigo-600 text-white hover:bg-indigo-700'}">
                        ${isRecommended ? '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" /></svg> Recommended' : '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" /></svg> Recommend'}
                    </button>
                </div>
            </div>`;
    };

    const createVerificationCardHTML = (request) => {
        return `
            <div class="bg-white rounded-xl shadow-md p-5 border border-gray-100 flex flex-col space-y-3">
                <div class="flex justify-between items-start">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-500"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                        </div>
                        <div>
                            <p class="font-bold text-gray-800">${request.studentName}</p>
                            <p class="text-sm text-gray-500">${request.studentEmail}</p>
                        </div>
                    </div>
                    <span class="text-xs font-semibold bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1.5"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.75-13a.75.75 0 00-1.5 0v5c0 .414.336.75.75.75h4a.75.75 0 000-1.5h-3.25V5z" clip-rule="evenodd" /></svg> Pending
                    </span>
                </div>
                <div class="pt-2">
                    <h4 class="font-semibold text-gray-700">${request.certificationTitle}</h4>
                    <p class="text-sm text-gray-500">${request.certificationProvider}</p>
                </div>
                <div class="flex items-center justify-between text-xs text-gray-500 pt-1">
                    <span class="font-medium bg-gray-100 text-gray-700 px-3 py-1 rounded-full">${request.domain}</span>
                    <span>Submitted: ${request.submittedDate}</span>
                </div>
                <div class="border-t border-gray-100 pt-4 flex gap-2">
                    <button class="flex-1 bg-white border border-gray-300 text-gray-700 font-semibold py-2 px-4 rounded-lg flex items-center justify-center gap-2 hover:bg-gray-50 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" /></svg> View Details
                    </button>
                    <button data-id="${request.id}" class="approve-btn flex-1 bg-green-500 text-white font-semibold py-2 px-4 rounded-lg flex items-center justify-center gap-2 hover:bg-green-600 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-4 h-4 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" /></svg> Approve
                    </button>
                    <button data-id="${request.id}" class="decline-btn bg-red-500 text-white font-semibold py-2 px-4 rounded-lg flex items-center justify-center hover:bg-red-600 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-4 h-4 pointer-events-none"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
            </div>`;
    };

    const createVerifiedCardHTML = (request) => {
        return `
            <div class="bg-white rounded-xl shadow-sm p-5 border border-gray-100 flex flex-col space-y-3 opacity-90">
                <div class="flex justify-between items-start">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-gray-500"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                        </div>
                        <div>
                            <p class="font-bold text-gray-800">${request.studentName}</p>
                            <p class="text-sm text-gray-500">${request.studentEmail}</p>
                        </div>
                    </div>
                    <span class="text-xs font-semibold bg-green-100 text-green-800 px-3 py-1 rounded-full flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-3 h-3 mr-1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" /></svg> Approved
                    </span>
                </div>
                <div class="pt-2">
                    <h4 class="font-semibold text-gray-700">${request.certificationTitle}</h4>
                    <p class="text-sm text-gray-500">${request.certificationProvider}</p>
                </div>
                <div class="border-t border-gray-100 pt-3 flex items-center justify-between text-xs text-gray-500">
                    <span class="font-medium bg-gray-100 text-gray-700 px-3 py-1 rounded-full">${request.domain}</span>
                    <span>Approved: ${request.verifiedDate} by ${request.verifiedBy}</span>
                </div>
            </div>`;
    };

    // --- RENDER FUNCTIONS ---
    const renderVerificationPage = () => {
        const grid = document.getElementById('pending-requests-grid');
        const verifiedGrid = document.getElementById('verified-requests-grid');
        const searchQuery = state.verificationSearch.toLowerCase();

        const filteredRequests = state.pendingRequests.filter(req =>
            req.studentName.toLowerCase().includes(searchQuery) ||
            req.certificationTitle.toLowerCase().includes(searchQuery) ||
            req.certificationProvider.toLowerCase().includes(searchQuery)
        );

        grid.innerHTML = filteredRequests.map(createVerificationCardHTML).join('');
        document.getElementById('no-pending-requests').classList.toggle('hidden', filteredRequests.length > 0);
        
        verifiedGrid.innerHTML = state.verifiedRequests.map(createVerifiedCardHTML).join('');
        document.getElementById('recently-verified-section').classList.toggle('hidden', state.verifiedRequests.length === 0);

        updateCounts();
    };

    const renderRecommendPage = () => {
        const grid = document.getElementById('certifications-grid');
        const { recommendSearch, domainFilter, levelFilter } = state;

        const filteredCerts = AVAILABLE_CERTIFICATIONS.filter(cert => {
            const matchesSearch = cert.title.toLowerCase().includes(recommendSearch.toLowerCase()) || cert.provider.toLowerCase().includes(recommendSearch.toLowerCase());
            const matchesDomain = domainFilter === 'All' || cert.domain === domainFilter;
            const matchesLevel = levelFilter === 'All' || cert.level === levelFilter;
            return matchesSearch && matchesDomain && matchesLevel;
        });

        grid.innerHTML = filteredCerts.map(cert => createCertificationCardHTML(cert, state.recommendedCertIds.has(cert.id))).join('');
        document.getElementById('no-certs-found').classList.toggle('hidden', filteredCerts.length > 0);
    };

    const updateCounts = () => {
        document.getElementById('verification-count').textContent = state.pendingRequests.length;
        document.getElementById('recommend-count').textContent = AVAILABLE_CERTIFICATIONS.length;
        document.getElementById('pending-count-badge').textContent = state.pendingRequests.filter(req =>
            req.studentName.toLowerCase().includes(state.verificationSearch.toLowerCase()) ||
            req.certificationTitle.toLowerCase().includes(state.verificationSearch.toLowerCase()) ||
            req.certificationProvider.toLowerCase().includes(state.verificationSearch.toLowerCase())
        ).length;
        document.getElementById('verified-count-badge').textContent = state.verifiedRequests.length;
    };
    
    // --- EVENT HANDLERS ---
    const handleTabClick = (view) => {
        state.activeView = view;
        const isVerification = view === 'verification';

        verificationPage.classList.toggle('hidden', !isVerification);
        recommendPage.classList.toggle('hidden', isVerification);

        verificationTabBtn.className = `flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors ${isVerification ? 'bg-indigo-100 text-indigo-700' : 'text-gray-600 hover:bg-gray-100'}`;
        recommendTabBtn.className = `flex items-center gap-2 px-4 py-2 rounded-lg font-semibold transition-colors ${!isVerification ? 'bg-indigo-100 text-indigo-700' : 'text-gray-600 hover:bg-gray-100'}`;
        
        const verificationCountSpan = verificationTabBtn.querySelector('span');
        const recommendCountSpan = recommendTabBtn.querySelector('span');
        verificationCountSpan.className = `text-xs font-bold w-6 h-5 flex items-center justify-center rounded-full ${isVerification ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700'}`;
        recommendCountSpan.className = `text-xs font-bold w-6 h-5 flex items-center justify-center rounded-full ${!isVerification ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-700'}`;
    };

    const handleApprove = (id) => {
        const requestToApprove = state.pendingRequests.find(r => r.id === id);
        if (!requestToApprove) return;

        state.pendingRequests = state.pendingRequests.filter(r => r.id !== id);
        
        const newVerifiedRequest = {
            ...requestToApprove,
            verifiedDate: new Date().toLocaleDateString(),
            verifiedBy: 'You',
        };

        state.verifiedRequests.unshift(newVerifiedRequest); // Add to beginning
        renderVerificationPage();
    };

    const handleDecline = (id) => {
        state.pendingRequests = state.pendingRequests.filter(r => r.id !== id);
        renderVerificationPage();
    };
    
    const handleRecommend = (id) => {
        state.recommendedCertIds.add(id);
        renderRecommendPage();
    };
    
    const setupEventListeners = () => {
        verificationTabBtn.addEventListener('click', () => handleTabClick('verification'));
        recommendTabBtn.addEventListener('click', () => handleTabClick('recommend'));

        document.getElementById('verification-search').addEventListener('input', (e) => {
            state.verificationSearch = e.target.value;
            renderVerificationPage();
        });

        document.getElementById('recommend-search').addEventListener('input', (e) => {
            state.recommendSearch = e.target.value;
            renderRecommendPage();
        });

        document.getElementById('domain-filter').addEventListener('change', (e) => {
            state.domainFilter = e.target.value;
            renderRecommendPage();
        });

        document.getElementById('level-filter').addEventListener('change', (e) => {
            state.levelFilter = e.target.value;
            renderRecommendPage();
        });
        
        // Event delegation for action buttons
        document.getElementById('app-container').addEventListener('click', (e) => {
            const target = e.target;
            const approveBtn = target.closest('.approve-btn');
            const declineBtn = target.closest('.decline-btn');
            const recommendBtn = target.closest('.recommend-btn');

            if (approveBtn) handleApprove(approveBtn.dataset.id);
            if (declineBtn) handleDecline(declineBtn.dataset.id);
            if (recommendBtn && !recommendBtn.disabled) handleRecommend(recommendBtn.dataset.id);
        });
    };
    
    const initializeFilters = () => {
        const domainFilter = document.getElementById('domain-filter');
        const levelFilter = document.getElementById('level-filter');
        domainFilter.innerHTML = '<option value="All">All Domains</option>' + Object.values(Domain).map(d => `<option value="${d}">${d}</option>`).join('');
        levelFilter.innerHTML = '<option value="All">All Levels</option>' + Object.values(Level).map(l => `<option value="${l}">${l}</option>`).join('');
    };

    // --- INITIALIZATION ---
    document.addEventListener('DOMContentLoaded', () => {
        initializeFilters();
        setupEventListeners();
        renderVerificationPage();
        renderRecommendPage(); // Render it once to populate the DOM, even though it's hidden
    });
</script>

<script type="module" src="/index.tsx"></script>
</body>
</html>
